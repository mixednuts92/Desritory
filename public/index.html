<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desritory</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #7c4dff;
            --secondary: #9333ea;
            --accent: #a855f7;
            --light: #c084fc;
            --glow: rgba(120, 70, 220, 0.4);
            --tab-bg: #2d2e30;
            --tab-bg-hover: #46474a;
            --tab-bg-active: #202124;
            --nav-bg: #202124;
            --tab-text: #e8eaed;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0a0b1a;
            background-image: 
                radial-gradient(ellipse at 20% 50%, rgba(88, 40, 180, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(60, 20, 140, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(30, 15, 80, 0.1) 0%, transparent 50%);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.5s ease;
        }

        /* Browser Tab Bar */
        .tab-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 36px;
            background: var(--tab-bg);
            display: flex;
            align-items: center;
            padding: 0;
            z-index: 10000;
            gap: 0;
            transition: background 0.3s ease;
        }

        .tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--tab-bg);
            font-size: 13px;
            max-width: 200px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-right: 1px solid var(--nav-bg);
            height: 100%;
            transform-origin: center;
            animation: slideInTab 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: var(--tab-text);
        }

        @keyframes slideInTab {
            from {
                opacity: 0;
                transform: translateX(-20px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .tab:hover {
            background: var(--tab-bg-hover);
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .tab.active {
            background: var(--tab-bg-active);
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .tab.closing {
            animation: slideOutTab 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes slideOutTab {
            from {
                opacity: 1;
                transform: translateX(0) scale(1);
                max-width: 200px;
                padding: 8px 12px;
            }
            to {
                opacity: 0;
                transform: translateX(-20px) scale(0.8);
                max-width: 0;
                padding: 8px 0;
            }
        }

        .tab-icon {
            font-size: 16px;
        }

        .tab-title {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-size: 12px;
            color: var(--tab-text);
        }

        .tab-close {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 16px;
            opacity: 0.6;
            transition: all 0.2s;
            color: var(--tab-text);
        }

        .tab-close:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
        }

        .new-tab-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 18px;
            color: var(--tab-text);
        }

        .new-tab-btn:hover {
            background: var(--tab-bg-hover);
            transform: scale(1.1);
        }

        .new-tab-btn:active {
            transform: scale(0.95);
        }

        .new-tab-btn.clicked {
            animation: pulseNewTab 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes pulseNewTab {
            0% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.2) rotate(180deg);
                background: var(--tab-bg-hover);
            }
            100% {
                transform: scale(1) rotate(360deg);
            }
        }

        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            top: 36px;
            left: 0;
            right: 0;
            height: 44px;
            background: var(--nav-bg);
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 8px;
            z-index: 9999;
            transition: background 0.3s ease;
        }

        .nav-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 18px;
            color: var(--tab-text);
            opacity: 0.7;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--tab-text);
            opacity: 1;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .address-bar {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--tab-bg);
            border-radius: 20px;
            padding: 8px 15px;
            transition: all 0.2s;
        }

        .address-bar:hover {
            background: var(--tab-bg-hover);
        }

        .address-bar:focus-within {
            background: var(--tab-bg);
            outline: 2px solid var(--primary);
        }

        .address-icon {
            font-size: 18px;
            color: var(--tab-text);
            opacity: 0.6;
        }

        .address-input {
            flex: 1;
            background: none;
            border: none;
            outline: none;
            color: var(--tab-text);
            font-size: 13px;
            font-family: 'Inter', sans-serif;
        }

        .address-input::placeholder {
            color: var(--tab-text);
            opacity: 0.5;
        }

        .menu-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 20px;
            color: var(--tab-text);
            opacity: 0.7;
        }

        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--tab-text);
            opacity: 1;
        }

        /* Main Container */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 90px 20px 20px;
            position: relative;
            z-index: 1;
            transition: opacity 0.3s ease-in-out;
        }

        .container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--glow);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(100px, -100px); }
            50% { transform: translate(-50px, -200px); }
            75% { transform: translate(-150px, -100px); }
        }

        /* Logo */
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 72px;
            font-weight: 900;
            letter-spacing: 8px;
            background: linear-gradient(135deg, var(--light) 0%, var(--primary) 25%, var(--accent) 50%, var(--secondary) 75%, var(--light) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 8s ease infinite;
            text-shadow: 0 0 80px var(--glow);
            margin-bottom: 15px;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 40px;
            letter-spacing: 2px;
        }

        /* Search Bar */
        .search-container {
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 15px 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .search-box:focus-within {
            border-color: var(--primary);
            box-shadow: 0 0 30px var(--glow);
        }

        .search-input {
            flex: 1;
            background: none;
            border: none;
            outline: none;
            color: white;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .search-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 18px;
        }

        .search-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 0 20px var(--glow);
        }

        /* Shortcuts */
        .shortcuts {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 40px;
        }

        .shortcut {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: white;
        }

        .shortcut:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--glow);
        }

        .shortcut img {
            width: 48px;
            height: 48px;
            border-radius: 10px;
        }

        .shortcut-name {
            font-size: 13px;
            opacity: 0.8;
        }

        /* Browse Games Button */
        .games-btn {
            padding: 18px 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--primary);
            border-radius: 50px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            letter-spacing: 1px;
            box-shadow: 0 0 20px var(--glow);
        }

        .games-btn:hover {
            background: rgba(124, 77, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 10px 40px var(--glow);
        }

        /* Footer */
        .footer {
            position: absolute;
            bottom: 20px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.3);
            letter-spacing: 1px;
        }

        /* Corner Buttons */
        .corner-buttons {
            position: fixed;
            top: 90px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .corner-btn {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            font-size: 20px;
        }

        .corner-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--glow);
        }

        /* Settings Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10001;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(20, 20, 40, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--light), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .close-btn:hover {
            opacity: 1;
        }

        .settings-section {
            margin-bottom: 25px;
        }

        .settings-label {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            opacity: 0.9;
        }

        .theme-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .theme-btn {
            padding: 12px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .toggle-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 13px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(24px);
        }

        /* Changelog Content */
        .changelog-content {
            max-height: 500px;
            overflow-y: auto;
        }

        .changelog-entry {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .changelog-entry:last-child {
            border-bottom: none;
        }

        .changelog-version {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .changelog-date {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 15px;
        }

        .changelog-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .changelog-item {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            padding-left: 5px;
        }

        /* Games Page */
        .games-page {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a0b1a;
            z-index: 9999;
            overflow-y: auto;
        }

        .games-page.active {
            display: block;
        }

        .games-header {
            position: sticky;
            top: 0;
            background: rgba(10, 11, 26, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            z-index: 100;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
        }

        .games-title {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--light), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .games-search {
            flex: 1;
            max-width: 400px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: white;
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
        }

        .games-search:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--glow);
        }

        .games-search::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .games-list {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .game-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .game-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateX(10px);
            box-shadow: 0 5px 30px var(--glow);
        }

        .game-icon {
            font-size: 40px;
            min-width: 60px;
            text-align: center;
        }

        .game-name {
            font-size: 18px;
            font-weight: 600;
        }

        /* Browser Content */
        .browser-content {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 9998;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .browser-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .browser-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .browser-frame.active {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-screen {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 11, 26, 0.98);
            backdrop-filter: blur(10px);
            z-index: 10002;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 30px;
        }

        .loading-screen.active {
            display: flex;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--light), var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .skip-loading {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--primary);
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .skip-loading:hover {
            background: rgba(124, 77, 255, 0.2);
            transform: scale(1.05);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo {
                font-size: 48px;
            }

            .shortcuts {
                grid-template-columns: repeat(2, 1fr);
            }

            .theme-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .games-header {
                flex-wrap: wrap;
            }

            .games-search {
                width: 100%;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Particles Background -->
    <div class="particles"></div>

    <!-- Browser Tab Bar -->
    <div class="tab-bar">
        <div class="new-tab-btn">+</div>
    </div>

    <!-- Navigation Bar -->
    <div class="nav-bar">
        <button class="nav-btn" onclick="goBack()" title="Back">‚Üê</button>
        <button class="nav-btn" onclick="goForward()" title="Forward">‚Üí</button>
        <button class="nav-btn" onclick="reloadPage()" title="Reload">‚Üª</button>
        <div class="address-bar">
            <span class="address-icon">üîí</span>
            <input type="text" class="address-input" placeholder="Search Google or type a URL" id="addressBar">
        </div>
        <button class="menu-btn" onclick="openSettings()">‚ãÆ</button>
    </div>

    <!-- Corner Buttons -->
    <div class="corner-buttons">
        <button class="corner-btn" onclick="openChangelog()">üìã</button>
        <button class="corner-btn" onclick="openSettings()">‚öôÔ∏è</button>
    </div>

    <!-- Main Container -->
    <div class="container">
        <h1 class="logo">DESRITORY</h1>
        <p class="subtitle">Browse Privately, Freely, and Anonymously</p>

        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search or enter URL..." id="browserSearch">
                <button class="search-btn" onclick="searchBrowser()">‚Üí</button>
            </div>
        </div>

        <!-- Shortcuts -->
        <div class="shortcuts">
            <div class="shortcut" onclick="openSite('https://youtube.com')">
                <img src="https://www.youtube.com/s/desktop/6e27c0b1/img/favicon_144x144.png" alt="YouTube">
                <span class="shortcut-name">YouTube</span>
            </div>
            <div class="shortcut" onclick="openSite('https://reddit.com')">
                <img src="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-180x180.png" alt="Reddit">
                <span class="shortcut-name">Reddit</span>
            </div>
            <div class="shortcut" onclick="openSite('https://twitter.com')">
                <img src="https://abs.twimg.com/responsive-web/client-web/icon-ios.77d25eba.png" alt="Twitter">
                <span class="shortcut-name">Twitter</span>
            </div>
            <div class="shortcut" onclick="openSite('https://discord.com')">
                <img src="https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png" alt="Discord">
                <span class="shortcut-name">Discord</span>
            </div>
        </div>

        <!-- Browse Games Button -->
        <button class="games-btn" onclick="showGamesPage()">Browse Games</button>

        <!-- Footer -->
        <div class="footer">¬©2025 Desritory</div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="close-btn" onclick="closeSettings()">√ó</button>
            </div>

            <div class="settings-section">
                <div class="settings-label">Theme</div>
                <div class="theme-buttons">
                    <button class="theme-btn" onclick="changeTheme('purple')" style="background: linear-gradient(135deg, #7c4dff, #9333ea);">Purple</button>
                    <button class="theme-btn" onclick="changeTheme('green')" style="background: linear-gradient(135deg, #10b981, #059669);">Green</button>
                    <button class="theme-btn" onclick="changeTheme('blue')" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">Blue</button>
                    <button class="theme-btn" onclick="changeTheme('red')" style="background: linear-gradient(135deg, #ef4444, #dc2626);">Red</button>
                    <button class="theme-btn" onclick="changeTheme('pink')" style="background: linear-gradient(135deg, #ec4899, #db2777);">Pink</button>
                    <button class="theme-btn" onclick="changeTheme('orange')" style="background: linear-gradient(135deg, #f59e0b, #d97706);">Orange</button>
                    <button class="theme-btn" onclick="changeTheme('cyan')" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">Cyan</button>
                    <button class="theme-btn" onclick="changeTheme('yellow')" style="background: linear-gradient(135deg, #eab308, #ca8a04);">Yellow</button>
                    <button class="theme-btn" onclick="changeTheme('blackwhite')" style="background: linear-gradient(135deg, #666, #222);">B&W</button>
                </div>
            </div>

            <div class="settings-section">
                <div class="settings-label">Tab Cloaking</div>
                <div class="toggle-option">
                    <span>Enable Tab Cloaking</span>
                    <div class="toggle-switch" id="cloakToggle" onclick="toggleCloak()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="settings-label">Panic Key (' key)</div>
                <div class="toggle-option">
                    <span>Enable Panic Key</span>
                    <div class="toggle-switch" id="panicToggle" onclick="togglePanic()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Changelog Modal -->
    <div class="modal" id="changelogModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Updates & Changelog</h2>
                <button class="close-btn" onclick="closeChangelog()">√ó</button>
            </div>

            <div class="changelog-content" id="changelogContent">
                <!-- Updated: Feb 7, 2026 v3 -->
                <div class="changelog-entry">
                    <div class="changelog-version">v0.5.0</div>
                    <div class="changelog-date">February 7, 2026</div>
                    <div class="changelog-items">
                        <div class="changelog-item">will add more soon dw</div>
                        <div class="changelog-item">currently working on improving proxy</div>
                        <div class="changelog-item">added B&W theme option</div>
                        <div class="changelog-item">attempting to add LOTS of games</div>
                        <div class="changelog-item">added a transition to make it look cool</div>
                        <div class="changelog-item">added a hopefully better tab cloaking</div>
                        <div class="changelog-item">working on adding a better ui</div>
                        <div class="changelog-item">added an almost instant response time (to some things)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Games Page -->
    <div class="games-page" id="gamesPage">
        <div class="games-header">
            <button class="back-btn" onclick="closeGames()">‚Üê Back</button>
            <h2 class="games-title">GAMES</h2>
            <input type="text" class="games-search" id="gamesSearch" placeholder="üîç Search games...">
            <button class="corner-btn" onclick="openSettings()">‚öôÔ∏è</button>
        </div>
        <div class="games-list" id="gamesList"></div>
    </div>

    <!-- Browser Content (Hidden initially, shows when loading a site) -->
    <div class="browser-content" id="browserContent">
        <iframe class="browser-frame" id="browserFrame" style="display: none;"></iframe>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <div class="loading-text" id="loadingText">LOADING...</div>
        <button class="skip-loading" onclick="skipLoading()">Skip Loading</button>
    </div>

    <script>
        // Proxy configuration - YOUR WORKING PROXY!
        const PROXY_SERVICES = [
            // Your Holy Unblocker proxy on Vercel
            url => `https://website-legacy-ashy.vercel.app/service/hvtrs8%2F-${btoa(url).replace(/=/g, '%3D')}`,
            // Backup: Try direct iframe (will fail for most sites due to X-Frame-Options)
            url => url
        ];

        let currentProxyUrl = '';
        let currentGameName = '';
        let loadingTimeout;
        
        // Tab management
        let tabs = [];
        let activeTabId = null;
        let nextTabId = 1;

        // Initialize with first tab
        function initializeTabs() {
            createNewTab('New Tab', '', true);
        }

        function createNewTab(title = 'New Tab', url = '', isInitial = false) {
            const tabId = nextTabId++;
            
            const tab = {
                id: tabId,
                title: title,
                url: url,
                element: null,
                iframeElement: null
            };
            
            tabs.push(tab);
            renderTab(tab);
            
            if (!isInitial) {
                switchToTab(tabId);
            }
            
            return tabId;
        }

        function renderTab(tab) {
            const tabBar = document.querySelector('.tab-bar');
            const newTabBtn = document.querySelector('.new-tab-btn');
            
            const tabElement = document.createElement('div');
            tabElement.className = 'tab';
            tabElement.setAttribute('data-tab-id', tab.id);
            
            tabElement.innerHTML = `
                <span class="tab-icon">üåê</span>
                <span class="tab-title">${tab.title}</span>
                <span class="tab-close">√ó</span>
            `;
            
            // Click to switch tab
            tabElement.addEventListener('click', (e) => {
                if (!e.target.classList.contains('tab-close')) {
                    switchToTab(tab.id);
                }
            });
            
            // Close button
            tabElement.querySelector('.tab-close').addEventListener('click', (e) => {
                e.stopPropagation();
                closeTab(tab.id);
            });
            
            tab.element = tabElement;
            tabBar.insertBefore(tabElement, newTabBtn);
        }

        function switchToTab(tabId) {
            // Deactivate all tabs
            tabs.forEach(tab => {
                if (tab.element) {
                    tab.element.classList.remove('active');
                }
                if (tab.iframeElement) {
                    tab.iframeElement.style.display = 'none';
                    tab.iframeElement.classList.remove('active');
                }
            });
            
            // Activate selected tab
            const tab = tabs.find(t => t.id === tabId);
            if (tab) {
                activeTabId = tabId;
                if (tab.element) {
                    tab.element.classList.add('active');
                }
                
                // Show appropriate view
                if (tab.url) {
                    // Show browser content with this tab's iframe
                    if (tab.iframeElement) {
                        tab.iframeElement.style.display = 'block';
                        // Trigger fade in animation
                        setTimeout(() => {
                            tab.iframeElement.classList.add('active');
                        }, 10);
                    }
                    document.querySelector('.container').style.display = 'none';
                    document.getElementById('gamesPage').classList.remove('active');
                    document.getElementById('browserContent').classList.add('active');
                    document.getElementById('addressBar').value = tab.url;
                } else {
                    // Show home page
                    document.getElementById('browserContent').classList.remove('active');
                    document.getElementById('gamesPage').classList.remove('active');
                    document.querySelector('.container').style.display = 'flex';
                    document.getElementById('addressBar').value = '';
                }
            }
        }

        function closeTab(tabId) {
            const tabIndex = tabs.findIndex(t => t.id === tabId);
            if (tabIndex === -1) return;
            
            const tab = tabs[tabIndex];
            
            // Add closing animation
            if (tab.element) {
                tab.element.classList.add('closing');
                
                // Wait for animation to complete before removing
                setTimeout(() => {
                    if (tab.element) {
                        tab.element.remove();
                    }
                    
                    // Remove iframe
                    if (tab.iframeElement) {
                        tab.iframeElement.remove();
                    }
                    
                    // Remove from array
                    tabs.splice(tabIndex, 1);
                    
                    // If this was the active tab, switch to another
                    if (activeTabId === tabId) {
                        if (tabs.length > 0) {
                            // Switch to the tab that's now at this index, or the previous one
                            const newActiveTab = tabs[Math.max(0, tabIndex - 1)];
                            switchToTab(newActiveTab.id);
                        } else {
                            // No tabs left, create a new one
                            createNewTab();
                        }
                    }
                }, 300); // Match animation duration
            }
        }

        function updateTabTitle(tabId, title) {
            const tab = tabs.find(t => t.id === tabId);
            if (tab && tab.element) {
                tab.title = title;
                const titleElement = tab.element.querySelector('.tab-title');
                if (titleElement) {
                    titleElement.textContent = title;
                }
            }
        }

        function getActiveTab() {
            return tabs.find(t => t.id === activeTabId);
        }

        // Games list
        const games = [
            { name: '2048', icon: 'üî¢', url: 'https://play2048.co/' },
            { name: 'Snake', icon: 'üêç', url: 'https://www.google.com/fbx?fbx=snake_arcade' },
            { name: 'Tetris', icon: 'üü¶', url: 'https://tetris.com/play-tetris' },
            { name: 'Pac-Man', icon: 'üëæ', url: 'https://www.google.com/logos/2010/pacman10-i.html' },
            { name: 'Slope', icon: '‚õ∑Ô∏è', url: 'https://slope-game.github.io/rbrush/slope/' },
            { name: 'Run 3', icon: 'üèÉ', url: 'https://www.coolmathgames.com/0-run-3' },
            { name: 'Minesweeper', icon: 'üí£', url: 'https://minesweeperonline.com/' },
            { name: 'Chess', icon: '‚ôüÔ∏è', url: 'https://www.chess.com/play/computer' },
            { name: 'Wordle', icon: 'üìù', url: 'https://www.nytimes.com/games/wordle/index.html' },
            { name: 'Cookie Clicker', icon: 'üç™', url: 'https://orteil.dashnet.org/cookieclicker/' },
            { name: 'Flappy Bird', icon: 'üê¶', url: 'https://flappybird.io/' },
            { name: 'Agar.io', icon: '‚ö™', url: 'https://agar.io/' }
        ];

        // Theme data
        const themes = {
            purple: {
                primary: '#7c4dff',
                secondary: '#9333ea',
                accent: '#a855f7',
                light: '#c084fc',
                glow: 'rgba(120, 70, 220, 0.4)',
                bgBase: '#0a0b1a',
                bgGradient1: 'rgba(88, 40, 180, 0.08)',
                bgGradient2: 'rgba(60, 20, 140, 0.06)',
                bgGradient3: 'rgba(30, 15, 80, 0.1)',
                tabBg: '#2d1b4e',
                tabBgHover: '#3d2b5e',
                tabBgActive: '#1a0f2e',
                navBg: '#1a0f2e',
                tabText: '#e8eaed'
            },
            green: {
                primary: '#10b981',
                secondary: '#059669',
                accent: '#34d399',
                light: '#6ee7b7',
                glow: 'rgba(16, 185, 129, 0.4)',
                bgBase: '#0a1a14',
                bgGradient1: 'rgba(16, 185, 129, 0.08)',
                bgGradient2: 'rgba(5, 150, 105, 0.06)',
                bgGradient3: 'rgba(4, 120, 87, 0.1)',
                tabBg: '#1a3d2e',
                tabBgHover: '#2a4d3e',
                tabBgActive: '#0f2a1e',
                navBg: '#0f2a1e',
                tabText: '#e8eaed'
            },
            blue: {
                primary: '#3b82f6',
                secondary: '#1d4ed8',
                accent: '#60a5fa',
                light: '#93c5fd',
                glow: 'rgba(59, 130, 246, 0.4)',
                bgBase: '#0a0f1a',
                bgGradient1: 'rgba(59, 130, 246, 0.08)',
                bgGradient2: 'rgba(29, 78, 216, 0.06)',
                bgGradient3: 'rgba(30, 58, 138, 0.1)',
                tabBg: '#1a2d4e',
                tabBgHover: '#2a3d5e',
                tabBgActive: '#0f1a2e',
                navBg: '#0f1a2e',
                tabText: '#e8eaed'
            },
            red: {
                primary: '#ef4444',
                secondary: '#dc2626',
                accent: '#f87171',
                light: '#fca5a5',
                glow: 'rgba(239, 68, 68, 0.4)',
                bgBase: '#1a0a0a',
                bgGradient1: 'rgba(239, 68, 68, 0.08)',
                bgGradient2: 'rgba(220, 38, 38, 0.06)',
                bgGradient3: 'rgba(185, 28, 28, 0.1)',
                tabBg: '#3d1a1a',
                tabBgHover: '#4d2a2a',
                tabBgActive: '#2a0f0f',
                navBg: '#2a0f0f',
                tabText: '#e8eaed'
            },
            pink: {
                primary: '#ec4899',
                secondary: '#db2777',
                accent: '#f472b6',
                light: '#f9a8d4',
                glow: 'rgba(236, 72, 153, 0.4)',
                bgBase: '#1a0a14',
                bgGradient1: 'rgba(236, 72, 153, 0.08)',
                bgGradient2: 'rgba(219, 39, 119, 0.06)',
                bgGradient3: 'rgba(190, 24, 93, 0.1)',
                tabBg: '#3d1a2e',
                tabBgHover: '#4d2a3e',
                tabBgActive: '#2a0f1e',
                navBg: '#2a0f1e',
                tabText: '#e8eaed'
            },
            orange: {
                primary: '#f59e0b',
                secondary: '#d97706',
                accent: '#fbbf24',
                light: '#fcd34d',
                glow: 'rgba(245, 158, 11, 0.4)',
                bgBase: '#1a140a',
                bgGradient1: 'rgba(245, 158, 11, 0.08)',
                bgGradient2: 'rgba(217, 119, 6, 0.06)',
                bgGradient3: 'rgba(180, 83, 9, 0.1)',
                tabBg: '#3d2a1a',
                tabBgHover: '#4d3a2a',
                tabBgActive: '#2a1a0f',
                navBg: '#2a1a0f',
                tabText: '#e8eaed'
            },
            cyan: {
                primary: '#06b6d4',
                secondary: '#0891b2',
                accent: '#22d3ee',
                light: '#67e8f9',
                glow: 'rgba(6, 182, 212, 0.4)',
                bgBase: '#0a1419',
                bgGradient1: 'rgba(6, 182, 212, 0.08)',
                bgGradient2: 'rgba(8, 145, 178, 0.06)',
                bgGradient3: 'rgba(14, 116, 144, 0.1)',
                tabBg: '#1a3d4e',
                tabBgHover: '#2a4d5e',
                tabBgActive: '#0f2a3e',
                navBg: '#0f2a3e',
                tabText: '#e8eaed'
            },
            yellow: {
                primary: '#eab308',
                secondary: '#ca8a04',
                accent: '#facc15',
                light: '#fde047',
                glow: 'rgba(234, 179, 8, 0.4)',
                bgBase: '#1a1a0a',
                bgGradient1: 'rgba(234, 179, 8, 0.08)',
                bgGradient2: 'rgba(202, 138, 4, 0.06)',
                bgGradient3: 'rgba(161, 98, 7, 0.1)',
                tabBg: '#3d3d1a',
                tabBgHover: '#4d4d2a',
                tabBgActive: '#2a2a0f',
                navBg: '#2a2a0f',
                tabText: '#e8eaed'
            },
            blackwhite: {
                primary: '#888888',
                secondary: '#666666',
                accent: '#aaaaaa',
                light: '#cccccc',
                glow: 'rgba(136, 136, 136, 0.4)',
                bgBase: '#0a0a0a',
                bgGradient1: 'rgba(80, 80, 80, 0.08)',
                bgGradient2: 'rgba(60, 60, 60, 0.06)',
                bgGradient3: 'rgba(40, 40, 40, 0.1)',
                tabBg: '#2d2e30',
                tabBgHover: '#46474a',
                tabBgActive: '#202124',
                navBg: '#202124',
                tabText: '#e8eaed'
            }
        };

        // Initialize particles
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Change theme
        function changeTheme(colorName) {
            const theme = themes[colorName];
            if (!theme) return;

            localStorage.setItem('desritory-theme', colorName);

            // Update body background
            document.body.style.background = theme.bgBase;
            document.body.style.backgroundImage = `
                radial-gradient(ellipse at 20% 50%, ${theme.bgGradient1} 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, ${theme.bgGradient2} 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, ${theme.bgGradient3} 0%, transparent 50%)
            `;

            // Update CSS variables
            document.documentElement.style.setProperty('--primary', theme.primary);
            document.documentElement.style.setProperty('--secondary', theme.secondary);
            document.documentElement.style.setProperty('--accent', theme.accent);
            document.documentElement.style.setProperty('--light', theme.light);
            document.documentElement.style.setProperty('--glow', theme.glow);
            
            // Update tab bar colors
            document.documentElement.style.setProperty('--tab-bg', theme.tabBg);
            document.documentElement.style.setProperty('--tab-bg-hover', theme.tabBgHover);
            document.documentElement.style.setProperty('--tab-bg-active', theme.tabBgActive);
            document.documentElement.style.setProperty('--nav-bg', theme.navBg);
            document.documentElement.style.setProperty('--tab-text', theme.tabText);

            // Update logo gradient
            const logo = document.querySelector('.logo');
            logo.style.background = `linear-gradient(135deg, ${theme.light} 0%, ${theme.primary} 25%, ${theme.accent} 50%, ${theme.secondary} 75%, ${theme.light} 100%)`;
            logo.style.webkitBackgroundClip = 'text';
            logo.style.webkitTextFillColor = 'transparent';
            logo.style.backgroundClip = 'text';

            // Update games title
            const gamesTitle = document.querySelector('.games-title');
            if (gamesTitle) {
                gamesTitle.style.background = `linear-gradient(135deg, ${theme.light}, ${theme.primary})`;
                gamesTitle.style.webkitBackgroundClip = 'text';
                gamesTitle.style.webkitTextFillColor = 'transparent';
                gamesTitle.style.backgroundClip = 'text';
            }

            // Update search button
            const searchBtn = document.querySelector('.search-btn');
            searchBtn.style.background = `linear-gradient(135deg, ${theme.primary}, ${theme.secondary})`;

            // Update all buttons
            document.querySelectorAll('.corner-btn, .back-btn').forEach(btn => {
                btn.style.borderColor = `rgba(255, 255, 255, 0.2)`;
            });

            // Update search inputs
            document.querySelectorAll('.search-input, .games-search').forEach(input => {
                input.style.caretColor = theme.primary;
            });

            // Update modal title
            const modalTitle = document.querySelector('.modal-title');
            if (modalTitle) {
                modalTitle.style.background = `linear-gradient(135deg, ${theme.light}, ${theme.primary})`;
                modalTitle.style.webkitBackgroundClip = 'text';
                modalTitle.style.webkitTextFillColor = 'transparent';
                modalTitle.style.backgroundClip = 'text';
            }

            // Update game items
            document.querySelectorAll('.game-item').forEach(item => {
                item.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            });

            // Update toggles
            document.querySelectorAll('.toggle-switch.active').forEach(toggle => {
                toggle.style.background = theme.primary;
            });

            // Update loading screen
            const loader = document.querySelector('.loader');
            if (loader) {
                loader.style.borderTopColor = theme.primary;
            }

            const loadingText = document.querySelector('.loading-text');
            if (loadingText) {
                loadingText.style.background = `linear-gradient(135deg, ${theme.light}, ${theme.primary}, ${theme.accent})`;
                loadingText.style.webkitBackgroundClip = 'text';
                loadingText.style.webkitTextFillColor = 'transparent';
                loadingText.style.backgroundClip = 'text';
            }

            const skipBtn = document.querySelector('.skip-loading');
            if (skipBtn) {
                skipBtn.style.borderColor = theme.primary;
            }

            // Update particles
            document.querySelectorAll('.particle').forEach(particle => {
                particle.style.background = theme.glow.replace('0.4', '0.3');
            });
        }

        // Settings functions
        function openSettings() {
            document.getElementById('settingsModal').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        function openChangelog() {
            document.getElementById('changelogModal').classList.add('active');
        }

        function closeChangelog() {
            document.getElementById('changelogModal').classList.remove('active');
        }

        function toggleCloak() {
            const toggle = document.getElementById('cloakToggle');
            toggle.classList.toggle('active');
            const enabled = toggle.classList.contains('active');
            localStorage.setItem('desritory-cloak', enabled);
            
            if (enabled) {
                document.title = 'Google';
                const favicon = document.querySelector("link[rel*='icon']") || document.createElement('link');
                favicon.type = 'image/x-icon';
                favicon.rel = 'shortcut icon';
                favicon.href = 'https://www.google.com/favicon.ico';
                document.getElementsByTagName('head')[0].appendChild(favicon);
            } else {
                document.title = 'Desritory';
            }
        }

        function togglePanic() {
            const toggle = document.getElementById('panicToggle');
            toggle.classList.toggle('active');
            localStorage.setItem('desritory-panic', toggle.classList.contains('active'));
        }

        // Games functions
        function showGamesPage() {
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingText = document.getElementById('loadingText');
            const gamesPage = document.getElementById('gamesPage');

            loadingText.textContent = 'Loading games library...';
            loadingScreen.classList.add('active');

            loadingTimeout = setTimeout(() => {
                loadingScreen.classList.remove('active');
                gamesPage.classList.add('active');
            }, 2000);
        }

        function closeGames() {
            document.getElementById('gamesPage').classList.remove('active');
            document.getElementById('gamesSearch').value = '';
            renderGames();
        }

        function renderGames(filter = '') {
            const gamesList = document.getElementById('gamesList');
            gamesList.innerHTML = '';

            const filteredGames = games.filter(game => 
                game.name.toLowerCase().includes(filter.toLowerCase())
            );

            filteredGames.forEach(game => {
                const gameItem = document.createElement('div');
                gameItem.className = 'game-item';
                gameItem.innerHTML = `
                    <div class="game-icon">${game.icon}</div>
                    <div class="game-name">${game.name}</div>
                `;
                gameItem.onclick = () => openGame(game.name, game.url);
                gamesList.appendChild(gameItem);
            });
        }

        function openGame(name, url) {
            currentGameName = name;
            currentProxyUrl = url;
            
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingText = document.getElementById('loadingText');

            loadingText.textContent = `Loading ${name}...`;
            loadingScreen.classList.add('active');

            loadingTimeout = setTimeout(() => {
                loadingScreen.classList.remove('active');
                loadProxiedContent(url);
            }, 2000);
        }

        function skipLoading() {
            clearTimeout(loadingTimeout);
            document.getElementById('loadingScreen').classList.remove('active');
            
            if (currentGameName) {
                loadProxiedContent(currentProxyUrl);
            } else {
                document.getElementById('gamesPage').classList.add('active');
            }
        }

        // Browser functions
        function searchBrowser() {
            const input = document.getElementById('browserSearch');
            const query = input.value.trim();
            
            if (!query) return;

            let url;
            if (query.includes('.') && !query.includes(' ')) {
                url = query.startsWith('http') ? query : 'https://' + query;
            } else {
                url = 'https://www.google.com/search?q=' + encodeURIComponent(query);
            }

            // Get active tab or create new one if on home page
            const activeTab = getActiveTab();
            if (activeTab && !activeTab.url) {
                // Current tab is empty, use it
                loadProxiedContent(url);
            } else {
                // Create new tab for search
                const newTabId = createNewTab('Searching...', url);
                switchToTab(newTabId);
                loadProxiedContent(url);
            }
            
            input.value = '';
        }

        function searchFromAddressBar() {
            const input = document.getElementById('addressBar');
            const query = input.value.trim();
            
            if (!query) return;

            let url;
            if (query.includes('.') && !query.includes(' ')) {
                url = query.startsWith('http') ? query : 'https://' + query;
            } else {
                url = 'https://www.google.com/search?q=' + encodeURIComponent(query);
            }

            // Always load in current active tab
            loadProxiedContent(url);
        }

        function goBack() {
            const activeTab = getActiveTab();
            if (activeTab && activeTab.iframeElement && activeTab.iframeElement.contentWindow) {
                try {
                    activeTab.iframeElement.contentWindow.history.back();
                } catch(e) {
                    console.log('Cannot go back');
                }
            }
        }

        function goForward() {
            const activeTab = getActiveTab();
            if (activeTab && activeTab.iframeElement && activeTab.iframeElement.contentWindow) {
                try {
                    activeTab.iframeElement.contentWindow.history.forward();
                } catch(e) {
                    console.log('Cannot go forward');
                }
            }
        }

        function reloadPage() {
            const activeTab = getActiveTab();
            if (activeTab && activeTab.iframeElement && activeTab.iframeElement.src) {
                activeTab.iframeElement.src = activeTab.iframeElement.src;
            }
        }

        function openSite(url) {
            loadProxiedContent(url);
        }

        function loadProxiedContent(url) {
            const activeTab = getActiveTab();
            if (!activeTab) return;
            
            const browserContent = document.getElementById('browserContent');
            const container = document.querySelector('.container');
            const addressBar = document.getElementById('addressBar');
            const browserFrame = document.getElementById('browserFrame');
            
            // Update tab
            activeTab.url = url;
            currentProxyUrl = url;
            
            // Get domain for title
            let domain = url;
            try {
                const urlObj = new URL(url);
                domain = urlObj.hostname.replace('www.', '');
            } catch(e) {
                domain = url.substring(0, 20);
            }
            updateTabTitle(activeTab.id, domain);

            // Update address bar
            addressBar.value = url;

            // Create or update iframe for this tab
            if (!activeTab.iframeElement) {
                const iframe = document.createElement('iframe');
                iframe.className = 'browser-frame';
                iframe.setAttribute('data-tab-id', activeTab.id);
                activeTab.iframeElement = iframe;
                browserFrame.parentNode.insertBefore(iframe, browserFrame.nextSibling);
            }

            // Hide all iframes
            document.querySelectorAll('.browser-frame').forEach(frame => {
                frame.style.display = 'none';
                frame.classList.remove('active');
            });

            // Show this tab's iframe
            activeTab.iframeElement.style.display = 'block';
            
            // Trigger fade in animation
            setTimeout(() => {
                activeTab.iframeElement.classList.add('active');
            }, 10);

            // Try proxy method
            const proxyUrl = PROXY_SERVICES[0](url);
            activeTab.iframeElement.src = proxyUrl;

            // Hide main page, show browser
            container.style.display = 'none';
            document.getElementById('gamesPage').classList.remove('active');
            browserContent.classList.add('active');
        }

        function goHome() {
            const activeTab = getActiveTab();
            if (!activeTab) return;
            
            const browserContent = document.getElementById('browserContent');
            const container = document.querySelector('.container');
            const addressBar = document.getElementById('addressBar');
            
            // Clear tab URL and update title
            activeTab.url = '';
            updateTabTitle(activeTab.id, 'New Tab');
            
            // Hide iframe
            if (activeTab.iframeElement) {
                activeTab.iframeElement.style.display = 'none';
            }
            
            // Clear address bar
            addressBar.value = '';
            
            // Hide browser, show main page
            browserContent.classList.remove('active');
            container.style.display = 'flex';
        }

        function reloadBrowser() {
            reloadPage();
        }

        function openInNewTab() {
            window.open(currentProxyUrl, '_blank');
        }

        function closeBrowser() {
            goHome();
        }

        // Search games
        document.getElementById('gamesSearch').addEventListener('input', (e) => {
            renderGames(e.target.value);
        });

        // Browser search on Enter
        document.getElementById('browserSearch').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchBrowser();
        });

        // Address bar on Enter
        document.getElementById('addressBar').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchFromAddressBar();
        });

        // ESC key to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeSettings();
                closeChangelog();
                if (document.getElementById('browserContent').classList.contains('active')) {
                    goHome();
                } else if (document.getElementById('gamesPage').classList.contains('active')) {
                    closeGames();
                }
            }

            // Panic key
            if (e.key === "'" && localStorage.getItem('desritory-panic') === 'true') {
                window.location.href = 'https://google.com';
            }
        });

        // Tab functionality
        const newTabBtn = document.querySelector('.new-tab-btn');
        newTabBtn.addEventListener('click', () => {
            // Add click animation
            newTabBtn.classList.add('clicked');
            setTimeout(() => {
                newTabBtn.classList.remove('clicked');
            }, 400);
            
            createNewTab();
        });

        // Initialize
        createParticles();
        renderGames();
        initializeTabs();

        // Load saved settings
        const savedTheme = localStorage.getItem('desritory-theme') || 'blackwhite'; // Default to B&W
        changeTheme(savedTheme);

        if (localStorage.getItem('desritory-cloak') === 'true') {
            document.getElementById('cloakToggle').classList.add('active');
            toggleCloak();
        }

        if (localStorage.getItem('desritory-panic') === 'true') {
            document.getElementById('panicToggle').classList.add('active');
        }
    </script>
</body>
</html>
